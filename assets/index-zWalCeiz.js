(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();const I=()=>{},x=e=>e;function R(e){return e===void 0?[]:Array.isArray(e)?e:[e]}function j(e){return e.length===0?void 0:e.length===1?e[0]:e}function Ge(e){return e==null?[]:Array.isArray(e)?e:typeof e=="string"||typeof e[Symbol.iterator]!="function"?[e]:[...e]}function Ke(e){return e!=null&&typeof e.next=="function"}function m(e){return e!=null&&typeof e.then=="function"}const J="",k=Symbol.for("crank.Portal"),je=Symbol.for("crank.Copy"),Me=Symbol.for("crank.Raw"),Be=Symbol.for("crank.Element");class ye{constructor(t,n,l,r,o){this.tag=t,this.props=n,this.key=l,this.ref=r,this.static_=o}}ye.prototype.$$typeof=Be;function We(e){return e!=null&&e.$$typeof===Be}function u(e,t,...n){let l,r,o=!1;const i={};if(t!=null)for(const s in t)switch(s){case"crank-key":case"c-key":case"$key":t[s]!=null&&(l=t[s]);break;case"crank-ref":case"c-ref":case"$ref":typeof t[s]=="function"&&(r=t[s]);break;case"crank-static":case"c-static":case"$static":o=!!t[s];break;default:i[s]=t[s]}return n.length>1?i.children=n:n.length===1&&(i.children=n[0]),new ye(e,i,l,r,o)}function qe(e){if(!(typeof e=="boolean"||e==null)){{if(typeof e=="string"||We(e))return e;if(typeof e[Symbol.iterator]=="function")return u(J,null,e)}return e.toString()}}function he(e){const t=[];let n;for(let l=0;l<e.length;l++){const r=e[l];if(r)if(typeof r=="string")n=(n||"")+r;else if(!Array.isArray(r))n&&(t.push(n),n=void 0),t.push(r);else for(let o=0;o<r.length;o++){const i=r[o];i&&(typeof i=="string"?n=(n||"")+i:(n&&(t.push(n),n=void 0),t.push(i)))}}return n&&t.push(n),t}class pe{constructor(t){this.el=t,this.ctx=void 0,this.children=void 0,this.value=void 0,this.cachedChildValues=void 0,this.fallbackValue=void 0,this.inflightValue=void 0,this.onNextValues=void 0}}function _(e){return typeof e.fallbackValue<"u"?typeof e.fallbackValue=="object"?_(e.fallbackValue):e.fallbackValue:e.el.tag===k?void 0:typeof e.el.tag!="function"&&e.el.tag!==J?e.value:j(F(e))}function F(e){if(e.cachedChildValues)return R(e.cachedChildValues);const t=[],n=R(e.children);for(let o=0;o<n.length;o++){const i=n[o];i&&t.push(typeof i=="string"?i:_(i))}const l=he(t),r=e.el.tag;return(typeof r=="function"||r!==J&&r!==Me)&&(e.cachedChildValues=j(l)),l}const Fe={create(){throw new Error("Not implemented")},hydrate(){throw new Error("Not implemented")},scope:x,read:x,text:x,raw:x,patch:I,arrange:I,dispose:I,flush:I},fe=Symbol.for("crank.RendererImpl");class Xe{constructor(t){this.cache=new WeakMap,this[fe]={...Fe,...t}}render(t,n,l){let r;const o=l&&l[w];typeof n=="object"&&n!==null&&(r=this.cache.get(n));let i;if(r===void 0)r=new pe(u(k,{children:t,root:n})),r.value=n,r.ctx=o,typeof n=="object"&&n!==null&&t!=null&&this.cache.set(n,r);else{if(r.ctx!==o)throw new Error("Context mismatch");i=r.el.props,r.el=u(k,{children:t,root:n}),typeof n=="object"&&n!==null&&t==null&&this.cache.delete(n)}const s=this[fe],f=X(s,n,r,o,s.scope(void 0,k,r.el.props),r,t,void 0);return m(f)?f.then(a=>ee(s,n,o,r,a,i)):ee(s,n,o,r,f,i)}hydrate(t,n,l){const r=this[fe],o=l&&l[w];let i;if(i=this.cache.get(n),i!==void 0)return this.render(t,n,l);let s;i=new pe(u(k,{children:t,root:n})),i.value=n,typeof n=="object"&&n!==null&&t!=null&&this.cache.set(n,i);const f=r.hydrate(k,n,{}),a=X(r,n,i,o,r.scope(void 0,k,i.el.props),i,t,f);return m(a)?a.then(c=>ee(r,n,o,i,c,s)):ee(r,n,o,i,a,s)}}function ee(e,t,n,l,r,o){return t!=null&&(e.arrange(k,t,l.el.props,r,o,R(l.cachedChildValues)),se(e,t)),l.cachedChildValues=j(r),t==null&&le(e,l,n,l),e.read(l.cachedChildValues)}function X(e,t,n,l,r,o,i,s){const f=R(o.children),a=[],c=Ge(i),p=[];let h,v,Q,ge=!1,A,P=0,me=f.length;for(let b=0,Z=c.length;b<Z;b++){let d=P>=me?void 0:f[P],E=qe(c[b]);{let O=typeof d=="object"?d.el.key:void 0,y=typeof E=="object"?E.key:void 0;if(y!==void 0&&Q&&Q.has(y)&&(console.error("Duplicate key",y),y=void 0),O===y)v!==void 0&&y!==void 0&&v.delete(y),P++;else if(v=v||ze(f,P),y===void 0){for(;d!==void 0&&O!==void 0;)P++,d=f[P],O=typeof d=="object"?d.el.key:void 0;P++}else d=v.get(y),d!==void 0&&v.delete(y),(Q=Q||new Set).add(y)}let V;if(typeof E=="object"){if(E.tag===je)V=we(d);else{let y,be=!1;if(typeof d=="object"&&d.el.tag===E.tag)y=d.el.props,d.el=E,E.static_&&(V=we(d),be=!0);else{typeof d=="object"&&(h=h||[]).push(d);const Ue=d;d=new pe(E),d.fallbackValue=Ue}be||(E.tag===Me?V=A?A.then(()=>ke(e,d,r,y,s)):ke(e,d,r,y,s):E.tag===J?V=A?A.then(()=>Ee(e,t,n,l,r,d,s)):Ee(e,t,n,l,r,d,s):typeof E.tag=="function"?V=A?A.then(()=>Ce(e,t,n,l,r,d,y,s)):Ce(e,t,n,l,r,d,y,s):V=A?A.then(()=>ve(e,t,l,r,d,y,s)):ve(e,t,l,r,d,y,s))}const O=E.ref;m(V)?(ge=!0,typeof O=="function"&&(V=V.then(y=>(O(e.read(y)),y))),s!==void 0&&(A=V)):typeof O=="function"&&O(e.read(V))}else typeof d=="object"&&(h=h||[]).push(d),typeof E=="string"?V=d=e.text(E,r,s):d=void 0;p[b]=V,a[b]=d}for(;P<me;P++){const b=f[P];typeof b=="object"&&(h=h||[]).push(b)}if(v!==void 0&&v.size>0&&(h=h||[]).push(...v.values()),o.children=j(a),ge){let b=Promise.all(p).finally(()=>{if(h)for(let d=0;d<h.length;d++)le(e,n,l,h[d])}),Z;return b=Promise.race([b,new Promise(d=>Z=d)]),o.onNextValues&&o.onNextValues(b),o.onNextValues=Z,b.then(d=>(o.inflightValue=o.fallbackValue=void 0,he(d)))}else{if(h)for(let b=0;b<h.length;b++)le(e,n,l,h[b]);return o.onNextValues&&(o.onNextValues(p),o.onNextValues=void 0),o.inflightValue=o.fallbackValue=void 0,he(p)}}function ze(e,t){const n=new Map;for(let l=t;l<e.length;l++){const r=e[l];typeof r=="object"&&typeof r.el.key<"u"&&n.set(r.el.key,r)}return n}function we(e){if(typeof e!="object")return e;const t=typeof e.el.tag=="function"?e.ctx:void 0;return t&&t.f&M&&t.inflightValue?t.inflightValue:e.inflightValue?e.inflightValue:_(e)}function ke(e,t,n,l,r){const o=t.el.props;return(!l||l.value!==o.value)&&(t.value=e.raw(o.value,n,r)),t.value}function Ee(e,t,n,l,r,o,i){const s=X(e,t,n,l,r,o,o.el.props.children,i);return m(s)?(o.inflightValue=s.then(f=>j(f)),o.inflightValue):j(s)}function ve(e,t,n,l,r,o,i){const s=r.el,f=s.tag;let a;s.tag===k?t=r.value=s.props.root:i!==void 0&&(a=i.children.shift()),l=e.scope(l,f,s.props);let c;a!=null&&typeof a!="string"&&(c=e.hydrate(f,a,s.props),c===void 0&&(a=void 0));const p=X(e,t,r,n,l,r,r.el.props.children,c);return m(p)?(r.inflightValue=p.then(h=>Ve(e,l,r,h,o,a)),r.inflightValue):Ve(e,l,r,p,o,a)}function Ve(e,t,n,l,r,o){const i=n.el.tag;let s=n.value;o!=null&&(s=n.value=o);let f=n.el.props,a;if(i!==k){s==null&&(s=n.value=e.create(i,f,t));for(const c in{...r,...f}){const p=f[c];p===je?(a=a||new Set).add(c):c!=="children"&&e.patch(i,s,c,p,r&&r[c],t)}}if(a){f={...n.el.props};for(const c of a)f[c]=r&&r[c];n.el=new ye(i,f,n.el.key,n.el.ref)}if(e.arrange(i,s,f,l,r,R(n.cachedChildValues)),n.cachedChildValues=j(l),i===k){se(e,n.value);return}return s}function se(e,t,n){if(e.flush(t),typeof t!="object"||t===null)return;const l=G.get(t);if(l){if(n){const r=new Map;for(let[o,i]of l)Ye(n,o)||(l.delete(o),r.set(o,i));r.size?G.set(t,r):G.delete(t)}else G.delete(t);for(const[r,o]of l){const i=e.read(_(r.ret));for(const s of o)s(i)}}}function le(e,t,n,l){if(typeof l.el.tag=="function")n=l.ctx,te(n);else if(l.el.tag===k)t=l,e.arrange(k,t.value,t.el.props,[],t.el.props,R(t.cachedChildValues)),se(e,t.value);else if(l.el.tag!==J){if(W(l.value)){const o=He(n,t);for(let i=0;i<o.length;i++){const s=o[i];l.value.removeEventListener(s.type,s.callback,s.options)}}e.dispose(l.el.tag,l.value,l.el.props),t=l}const r=R(l.children);for(let o=0;o<r.length;o++){const i=r[o];typeof i=="object"&&le(e,t,n,i)}}const M=1,g=2,C=4,z=8,q=16,D=32,S=64,T=128,K=256,U=512,ae=1024,ue=2048,ce=new WeakMap,re=new WeakMap,ie=new WeakMap,G=new WeakMap;class De{constructor(t,n,l,r,o,i){this.f=0,this.owner=new Je(this),this.renderer=t,this.root=n,this.host=l,this.parent=r,this.scope=o,this.ret=i,this.iterator=void 0,this.inflightBlock=void 0,this.inflightValue=void 0,this.enqueuedBlock=void 0,this.enqueuedValue=void 0,this.onProps=void 0,this.onPropsRequested=void 0}}const w=Symbol.for("crank.ContextImpl");class Je{constructor(t){this[w]=t}get props(){return this[w].ret.el.props}get value(){return this[w].renderer.read(_(this[w].ret))}*[Symbol.iterator](){const t=this[w];try{for(t.f|=C;!(t.f&T);){if(t.f&q)throw new Error("Context iterated twice without a yield");t.f|=q,yield t.ret.el.props}}finally{t.f&=~C}}async*[Symbol.asyncIterator](){const t=this[w];if(t.f&K)throw new Error("Use for...of in sync generator components");try{for(t.f|=z;!(t.f&T);){if(t.f&q)throw new Error("Context iterated twice without a yield");if(t.f|=q,t.f&D)t.f&=~D,yield t.ret.el.props;else{const n=await new Promise(l=>t.onProps=l);if(t.f&T)break;yield n}t.onPropsRequested&&(t.onPropsRequested(),t.onPropsRequested=void 0)}}finally{t.f&=~z,t.onPropsRequested&&(t.onPropsRequested(),t.onPropsRequested=void 0)}}refresh(){const t=this[w];if(t.f&T)return console.error("Component is unmounted"),t.renderer.read(void 0);if(t.f&g)return console.error("Component is already executing"),this.value;const n=oe(t);return m(n)?n.then(l=>t.renderer.read(l)):t.renderer.read(n)}schedule(t){const n=this[w];let l=re.get(n);l||(l=new Set,re.set(n,l)),l.add(t)}flush(t){const n=this[w];if(typeof n.root!="object"||n.root===null)return;let l=G.get(n.root);l||(l=new Map,G.set(n.root,l));let r=l.get(n);r||(r=new Set,l.set(n,r)),r.add(t)}cleanup(t){const n=this[w];if(n.f&T){const r=n.renderer.read(_(n.ret));t(r);return}let l=ie.get(n);l||(l=new Set,ie.set(n,l)),l.add(t)}consume(t){for(let n=this[w].parent;n!==void 0;n=n.parent){const l=ce.get(n);if(l&&l.has(t))return l.get(t)}}provide(t,n){const l=this[w];let r=ce.get(l);r||(r=new Map,ce.set(l,r)),r.set(t,n)}addEventListener(t,n,l){const r=this[w];let o;if(Te(n)){const f=L.get(r);f?o=f:(o=[],L.set(r,o))}else return;l=Ae(l);let i;typeof n=="object"?i=()=>n.handleEvent.apply(n,arguments):i=n;const s={type:t,listener:n,callback:i,options:l};if(l.once&&(s.callback=function(){const f=o.indexOf(s);return f!==-1&&o.splice(f,1),i.apply(this,arguments)}),!o.some(f=>s.type===f.type&&s.listener===f.listener&&!s.options.capture==!f.options.capture)){o.push(s);for(const f of F(r.ret))W(f)&&f.addEventListener(s.type,s.callback,s.options)}}removeEventListener(t,n,l){const r=this[w],o=L.get(r);if(o==null||!Te(n))return;const i=Ae(l),s=o.findIndex(a=>a.type===t&&a.listener===n&&!a.options.capture==!i.capture);if(s===-1)return;const f=o[s];o.splice(s,1);for(const a of F(r.ret))W(a)&&a.removeEventListener(f.type,f.callback,f.options)}dispatchEvent(t){const n=this[w],l=[];for(let i=n.parent;i!==void 0;i=i.parent)l.push(i);let r=!1;const o=t.stopImmediatePropagation;N(t,"stopImmediatePropagation",()=>(r=!0,o.call(t))),N(t,"target",n.owner);try{N(t,"eventPhase",et);for(let i=l.length-1;i>=0;i--){const s=l[i],f=L.get(s);if(f){N(t,"currentTarget",s.owner);for(const a of f)if(a.type===t.type&&a.options.capture){try{a.callback.call(s.owner,t)}catch(c){console.error(c)}if(r)return!0}}if(t.cancelBubble)return!0}{N(t,"eventPhase",tt),N(t,"currentTarget",n.owner);const i=n.ret.el.props["on"+t.type];if(i!=null&&(i(t),r||t.cancelBubble))return!0;const s=L.get(n);if(s){for(const f of s)if(f.type===t.type){try{f.callback.call(n.owner,t)}catch(a){console.error(a)}if(r)return!0}if(t.cancelBubble)return!0}}if(t.bubbles){N(t,"eventPhase",nt);for(let i=0;i<l.length;i++){const s=l[i],f=L.get(s);if(f){N(t,"currentTarget",s.owner);for(const a of f)if(a.type===t.type&&!a.options.capture){try{a.callback.call(s.owner,t)}catch(c){console.error(c)}if(r)return!0}}if(t.cancelBubble)return!0}}}finally{return N(t,"eventPhase",xe),N(t,"currentTarget",null),!t.defaultPrevented}}}function Ye(e,t){for(let n=t;n!==void 0;n=n.parent)if(n===e)return!0;return!1}function Ce(e,t,n,l,r,o,i,s){let f;if(i){if(f=o.ctx,f.f&g)return console.error("Component is already executing"),o.cachedChildValues}else f=o.ctx=new De(e,t,n,l,r,o);return f.f|=M,oe(f,s)}function H(e,t,n){if(e.f&T)return;if(e.f&S)return;t===void 0&&console.error("A component has returned or yielded undefined. If this was intentional, return or yield null instead.");let l;try{e.f|=g,l=X(e.renderer,e.root,e.host,e,e.scope,e.ret,qe(t),n)}finally{e.f&=~g}return m(l)?(e.ret.inflightValue=l.then(r=>_e(e,r)),e.ret.inflightValue):_e(e,l)}function _e(e,t){if(e.f&T)return;const n=L.get(e);if(n&&n.length)for(let i=0;i<t.length;i++){const s=t[i];if(W(s))for(let f=0;f<n.length;f++){const a=n[f];s.addEventListener(a.type,a.callback,a.options)}}const l=R(e.ret.cachedChildValues);let r=e.ret.cachedChildValues=j(t);if(e.f&ae)e.f|=ue;else if(!(e.f&M)){if(!Ze(l,t)){const i=He(e.parent,e.host);if(i.length)for(let c=0;c<t.length;c++){const p=t[c];if(W(p))for(let h=0;h<i.length;h++){const v=i[h];p.addEventListener(v.type,v.callback,v.options)}}const s=e.host,f=R(s.cachedChildValues);Qe(e,s);const a=F(s);e.renderer.arrange(s.el.tag,s.value,s.el.props,a,s.el.props,f)}se(e.renderer,e.root,e)}const o=re.get(e);if(o){re.delete(e),e.f|=ae;const i=e.renderer.read(r);for(const s of o)s(i);e.f&=~ae,e.f&ue&&(e.f&=~ue,r=_(e.ret))}return e.f&=~M,r}function Qe(e,t){for(let n=e.parent;n!==void 0&&n.host===t;n=n.parent)n.ret.cachedChildValues=void 0;t.cachedChildValues=void 0}function Ze(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++){const l=e[n],r=t[n];if(l!==r)return!1}return!0}function oe(e,t){if(e.f&U&&!(e.f&C)){if(t!==void 0)throw new Error("Hydration error");const n=e.f&z&&!e.onProps;return Y(e),n?(e.inflightBlock==null&&(e.inflightBlock=new Promise(l=>e.onPropsRequested=l)),e.inflightBlock.then(()=>(e.inflightBlock=void 0,e.inflightValue))):e.inflightValue}else if(e.inflightBlock){if(!e.enqueuedBlock){if(t!==void 0)throw new Error("Hydration error");let n;e.enqueuedBlock=new Promise(l=>n=l),e.enqueuedValue=e.inflightBlock.then(()=>{try{const[l,r]=Ne(e);return l&&n(l.finally(()=>Pe(e))),r}catch(l){if(!(e.f&M)){if(!e.parent)throw l;return B(e.parent,l)}throw l}})}}else try{const[n,l]=Ne(e,t);return n&&(e.inflightBlock=n.then(r=>r).finally(()=>Pe(e)),e.inflightValue=l),l}catch(n){if(!(e.f&M)){if(!e.parent)throw n;return B(e.parent,n)}throw n}return e.enqueuedValue}function Pe(e){e.f&U&&!(e.f&C)||(e.inflightBlock=e.enqueuedBlock,e.inflightValue=e.enqueuedValue,e.enqueuedBlock=void 0,e.enqueuedValue=void 0)}function Ne(e,t){const n=e.ret,l=!e.iterator;if(l){Y(e),e.f|=g,$e(e);let o;try{o=n.el.tag.call(e.owner,n.el.props)}catch(i){throw e.f|=S,i}finally{e.f&=~g}if(Ke(o))e.iterator=o;else if(m(o)){const i=o instanceof Promise?o:Promise.resolve(o),s=i.then(f=>H(e,f,t),f=>{throw e.f|=S,f});return[i.catch(I),s]}else return[void 0,H(e,o,t)]}else if(t!==void 0)throw new Error("Hydration error");let r;if(l){try{e.f|=g,r=e.iterator.next()}catch(o){throw e.f|=S,o}finally{e.f&=~g}m(r)?e.f|=U:e.f|=K}if(e.f&K){if(e.f&=~q,!l)try{e.f|=g,r=e.iterator.next(e.renderer.read(_(n)))}catch(s){throw e.f|=S,s}finally{e.f&=~g}if(m(r))throw new Error("Mixed generator component");r.done&&(e.f&=~K,e.iterator=void 0);let o;try{o=H(e,r.value,t),m(o)&&(o=o.catch(s=>$(e,s)))}catch(s){o=$(e,s)}return[m(o)?o.catch(I):void 0,o]}else if(e.f&C){if(e.f&=~q,!l)try{e.f|=g,r=e.iterator.next(e.renderer.read(_(n)))}catch(s){throw e.f|=S,s}finally{e.f&=~g}if(!m(r))throw new Error("Mixed generator component");const o=r.catch(I),i=r.then(s=>{let f;e.f&C||Se(e,Promise.resolve(s),t);try{f=H(e,s.value,t),m(f)&&(f=f.catch(a=>$(e,a)))}catch(a){f=$(e,a)}return f},s=>{throw e.f|=S,s});return[o,i]}else return Se(e,r,t),[e.inflightBlock,e.inflightValue]}async function Se(e,t,n){let l=!1;try{for(;!l&&!(e.f&C);){let r;e.inflightValue=new Promise(f=>r=f),e.f&M&&e.inflightValue.catch(I);let o;try{o=await t}catch(f){l=!0,e.f|=S,r(Promise.reject(f));break}finally{e.f&=~q,e.f&z||(e.f&=~D)}l=!!o.done;let i;try{i=H(e,o.value,n),n=void 0,m(i)&&(i=i.catch(f=>$(e,f)))}catch(f){i=$(e,f)}finally{r(i)}let s;if(e.ret.inflightValue?(s=e.ret.inflightValue.then(f=>e.renderer.read(f)),s.catch(f=>{if(!(e.f&M)){if(!e.parent)throw f;return B(e.parent,f)}})):s=e.renderer.read(_(e.ret)),e.f&T)if(e.f&z)try{e.f|=g,t=e.iterator.next(s)}finally{e.f&=~g}else{ne(e);break}else if(!l&&!(e.f&C))try{e.f|=g,t=e.iterator.next(s)}finally{e.f&=~g}}}finally{l&&(e.f&=~U,e.iterator=void 0)}}function Y(e){e.onProps?(e.onProps(e.ret.el.props),e.onProps=void 0,e.f&=~D):e.f|=D}function te(e){if(e.f&T)return;$e(e);const t=ie.get(e);if(t){ie.delete(e);const n=e.renderer.read(_(e.ret));for(const l of t)l(n)}if(e.f|=T,e.iterator)if(e.f&K){let n;e.f&C&&(n=oe(e)),m(n)?n.then(()=>{e.f&C?te(e):ne(e)},l=>{if(!e.parent)throw l;return B(e.parent,l)}):e.f&C?te(e):ne(e)}else e.f&U&&(e.f&C?oe(e).then(()=>{e.f&C?te(e):ne(e)},l=>{if(!e.parent)throw l;return B(e.parent,l)}):Y(e))}function ne(e){if(Y(e),e.iterator&&typeof e.iterator.return=="function")try{e.f|=g;const t=e.iterator.return();m(t)&&t.catch(n=>{if(!e.parent)throw n;return B(e.parent,n)})}finally{e.f&=~g}}const xe=0,et=1,tt=2,nt=3,L=new WeakMap;function Te(e){return typeof e=="function"||e!==null&&typeof e=="object"&&typeof e.handleEvent=="function"}function Ae(e){return typeof e=="boolean"?{capture:e}:e??{}}function W(e){return e!=null&&typeof e.addEventListener=="function"&&typeof e.removeEventListener=="function"&&typeof e.dispatchEvent=="function"}function N(e,t,n){Object.defineProperty(e,t,{value:n,writable:!1,configurable:!0})}function He(e,t){let n=[];for(;e!==void 0&&e.host===t;){const l=L.get(e);l&&(n=n.concat(l)),e=e.parent}return n}function $e(e){const t=L.get(e);if(t&&t.length){for(const n of F(e.ret))if(W(n))for(const l of t)n.removeEventListener(l.type,l.callback,l.options);t.length=0}}function $(e,t){if(!e.iterator||typeof e.iterator.throw!="function")throw t;Y(e);let n;try{e.f|=g,n=e.iterator.throw(t)}catch(l){throw e.f|=S,l}finally{e.f&=~g}return m(n)?n.then(l=>(l.done&&(e.f&=~U,e.iterator=void 0),H(e,l.value)),l=>{throw e.f|=S,l}):(n.done&&(e.f&=~K,e.f&=~U,e.iterator=void 0),H(e,n.value))}function B(e,t){let n;try{n=$(e,t)}catch(l){if(!e.parent)throw l;return B(e.parent,l)}return m(n)?n.catch(l=>{if(!e.parent)throw l;return B(e.parent,l)}):n}const de="http://www.w3.org/2000/svg",lt={scope(e,t,n){switch(t){case k:e=void 0;break;case"svg":e=de;break}return n.xmlns||e},create(e,t,n){if(typeof e!="string")throw new Error(`Unknown tag: ${e.toString()}`);return e.toLowerCase()==="svg"&&(n=de),n?document.createElementNS(n,e):document.createElement(e)},hydrate(e,t,n){if(typeof e!="string"&&e!==k)throw new Error(`Unknown tag: ${e.toString()}`);if(typeof e=="string"&&e.toUpperCase()!==t.tagName)return;const l=[];for(let r=0;r<t.childNodes.length;r++){const o=t.childNodes[r];o.nodeType===Node.TEXT_NODE?l.push(o.data):o.nodeType===Node.ELEMENT_NODE&&l.push(o)}return{props:n,children:l}},patch(e,t,n,l,r,o){const i=o===de;switch(n){case"style":{const s=t.style;if(s==null)t.setAttribute("style",l);else if(l==null||l===!1)t.removeAttribute("style");else if(l===!0)t.setAttribute("style","");else if(typeof l=="string")s.cssText!==l&&(s.cssText=l);else{typeof r=="string"&&(s.cssText="");for(const f in{...r,...l}){const a=l&&l[f];a==null?s.removeProperty(f):s.getPropertyValue(f)!==a&&s.setProperty(f,a)}}break}case"class":case"className":l===!0?t.setAttribute("class",""):l==null?t.removeAttribute("class"):i?t.getAttribute("class")!==l&&t.setAttribute("class",l):t.className!==l&&(t.className=l);break;case"innerHTML":l!==r&&(t.innerHTML=l);break;default:{if(n in t&&!(typeof l=="string"&&typeof t[n]=="boolean")){let s=t;do if(Object.prototype.hasOwnProperty.call(s,n))break;while(s=Object.getPrototypeOf(s));const f=Object.getOwnPropertyDescriptor(s,n);if(f!=null&&(f.writable===!0||f.set!==void 0)){(t[n]!==l||r===void 0)&&(t[n]=l);return}}if(l===!0)l="";else if(l==null||l===!1){t.removeAttribute(n);return}t.getAttribute(n)!==l&&t.setAttribute(n,l)}}},arrange(e,t,n,l,r,o){if(e===k&&(t==null||typeof t.nodeType!="number"))throw new TypeError(`Portal root is not a node. Received: ${JSON.stringify(t&&t.toString())}`);if(!("innerHTML"in n)&&("children"in n||o&&o.length))if(l.length===0)t.textContent="";else{let i=t.firstChild,s=0;for(;i!==null&&s<l.length;){const f=l[s];if(i===f)i=i.nextSibling,s++;else if(typeof f=="string")i.nodeType===Node.TEXT_NODE?(i.data!==f&&(i.data=f),i=i.nextSibling):t.insertBefore(document.createTextNode(f),i),s++;else if(i.nodeType===Node.TEXT_NODE){const a=i.nextSibling;t.removeChild(i),i=a}else if(t.insertBefore(f,i),s++,i!==l[s]){const a=i.nextSibling;t.removeChild(i),i=a}}for(;i!==null;){const f=i.nextSibling;t.removeChild(i),i=f}for(;s<l.length;s++){const f=l[s];t.appendChild(typeof f=="string"?document.createTextNode(f):f)}}},text(e,t,n){if(n!=null){let l=n.children.shift();typeof l!="string"||!l.startsWith(e)||e.length<l.length&&(l=l.slice(e.length),n.children.unshift(l))}return e},raw(e,t,n){let l;if(typeof e=="string"){const r=t==null?document.createElement("div"):document.createElementNS(t,"svg");r.innerHTML=e,r.childNodes.length===0?l=void 0:r.childNodes.length===1?l=r.childNodes[0]:l=Array.from(r.childNodes)}else l=e;if(n!=null)if(Array.isArray(l))for(let r=0;r<l.length;r++){const o=l[r];typeof o!="string"&&(o.nodeType===Node.ELEMENT_NODE||o.nodeType===Node.TEXT_NODE)&&n.children.shift()}else l!=null&&typeof l!="string"&&(l.nodeType===Node.ELEMENT_NODE||l.nodeType===Node.TEXT_NODE)&&n.children.shift();return l}};class rt extends Xe{constructor(){super(lt)}render(t,n,l){return Le(n),super.render(t,n,l)}hydrate(t,n,l){return Le(n),super.hydrate(t,n,l)}}function Le(e){if(e===null||typeof e=="object"&&typeof e.nodeType!="number")throw new TypeError(`Render root is not a node. Received: ${JSON.stringify(e&&e.toString())}`)}const it=new rt;function*ot(e){let t=!1,n=0;const l=i=>{i.preventDefault(),n=setTimeout(()=>{t=!0,this.refresh()},500)},r=i=>{i.preventDefault(),t=!1,clearTimeout(n),this.refresh()},o=i=>{i.preventDefault()};for(let i of this)yield u("div",{class:"player"},u("span",{class:"player__intro"},"Hey there ",u("em",{class:"text-title"},i.player.name),"."),u("span",{class:"player__help"},"Your cringle:"),u("span",{class:"player__target text-title",onmousedown:l,ontouchstart:l,onmouseup:r,ontouchend:r,oncontextmenu:o,children:t?i.player.target:"****"}),u("span",{class:"player__help"},"Hold to reveal"),u("img",{class:"player__logo full-bleed",src:"logo.webp"}))}function st(e){return u("div",{class:"allocations"},u("h1",null,e.setup.name),u("div",{class:"allocate__list"},e.allocations.map((t,n)=>u("div",{class:"allocate__item row-item","crank-key":n},u("span",{class:"allocate__player text-title"},t.name),u("hr",null),u("a",{class:"allocate__target",href:ft(t),target:"_blank"},"*****")))),!!e.setup.rules.length&&u("div",null,u("hr",null),u("div",{class:"rules__list"},e.setup.rules.map((t,n)=>u("div",{class:"setup__rule","crank-key":n},u("span",null,u("strong",{class:"text-title"},t.from)," ","cannot give to"," ",u("strong",{class:"text-title"},t.to),t.bidirectional&&u("em",null," ","(and vice versa)")))))),u("hr",null),u("div",{class:"toolbar"},u("button",{type:"button",onclick:e.onReset},"Reset")))}function ft(e){const{protocol:t,host:n,pathname:l}=location,r=new URLSearchParams;return r.set("name",e.name),r.set("target",btoa(e.target.padEnd(10," "))),`${t}//${n}${l}#`+r.toString()}function*Re(e){return u("select",{class:e.class,name:e.name,onchange:e.onchange},u("option",{value:"",children:"Select..."}),[...e.options].map(([t,n],l)=>u("option",{"crank-key":t+":"+l,value:t,selected:t===e.value,children:n})))}function*at(e){const t=[...e.setup.players],n=[...e.setup.rules],l=f=>{const a=f.target;f.preventDefault();const c=a.elements.namedItem("player");c.value&&(t.push(c.value),c.value="",this.refresh())},r=f=>{t.splice(f,1),this.refresh()},o=f=>{const a=f.target;f.preventDefault();const c=a.elements.namedItem("from"),p=a.elements.namedItem("to"),h=a.elements.namedItem("bidirectional");n.push({from:c.value,to:p.value,bidirectional:h.checked}),c.value="",p.value="",h.checked=!1,this.refresh()},i=f=>{n.splice(f,1),this.refresh()},s=f=>{f.preventDefault(),t.splice(0,t.length,...t.filter(a=>a)),n.splice(0,n.length,...n.filter(a=>a.from&&a.to)),e.onSubmit({name:new Date().toLocaleDateString(),players:t,rules:n})};for(let f of this){const a=[...t.entries()].map(c=>[c[1],c[1]]);yield u("div",{class:"setup"},u("h1",null,"Clan Cringle"),u("h2",null,"Players"),u("div",{class:"setup__list"},t.map((c,p)=>u("div",{class:"setup__player row-item","crank-key":p},u("span",{class:"text-title"},c),u("hr",null),u("button",{type:"button",onclick:r.bind(null,p)},"Delete")))),u("hr",null),u("form",{class:"setup__player__form",onsubmit:l},u("input",{type:"text",name:"player"}),u("button",{type:"submit"},"Add Player")),u("hr",null),u("h2",null,"Exclusions"),u("div",{class:"setup__list"},n.map((c,p)=>u("div",{class:"setup__rule","crank-key":p},u("span",null,u("strong",{class:"text-title"},c.from)," ","cannot give to"," ",u("strong",{class:"text-title"},c.to)),u("span",null,c.bidirectional&&u("em",null," ","(and vice versa)")),u("button",{type:"button",onclick:i.bind(null,p)},"Delete")))),u("hr",null),u("form",{class:"setup__rule__form",onsubmit:o},u(Re,{name:"from",options:a}),u(Re,{name:"to",options:a}),u("label",null,u("input",{type:"checkbox",name:"bidirectional"}),u("span",null,"Both ways?")),u("button",{type:"submit"},"Add Exclusion")),u("hr",null),u("div",{class:"toolbar"},u("button",{type:"button",onclick:s},"Create")))}}const Oe={name:"",players:[],rules:[]};function ut(e,t=50){t+=e.players.length;for(let n=0;n<t;n++)try{return ct(e.players,e.rules)}catch{}throw new Error("Cannot allocate players")}function ct(e,t){const n=[],l=e.slice(0);for(let r of e){const o=[];o.push(r);for(let a of t)a.from===r&&o.push(a.to),a.bidirectional&&a.to===r&&o.push(a.from);const i=l.filter(a=>!o.includes(a));if(i.length===0)throw new Error("Cannot allocate player: "+r);const s=Math.floor(Math.random()*i.length),f=i[s];n.push({name:r,target:f}),l.splice(l.indexOf(f),1)}return n}function Ie(e,t){const n=localStorage.getItem(e);n?t=JSON.parse(n):Array.isArray(t)?t=[...t]:t&&typeof t=="object"?t={...t}:t=t;const l={value:t,commit(){const r=JSON.stringify(l.value);localStorage.setItem(e,r)}};return l}function dt(e){let t=l();window.addEventListener("hashchange",n),e.cleanup(()=>{window.removeEventListener("hashchange",n)});function n(){Object.assign(t,{},l()),e.refresh()}function l(){const r=new URLSearchParams(window.location.hash.slice(1)),o={};for(let[i,s]of r.entries())o[i]=s;return o}return t}function*ht(){const e=dt(this),t=Ie("cc:setup",Oe),n=Ie("cc:allocations",[]),l=i=>{try{t.value=i,t.commit(),n.value=ut(t.value),n.commit()}catch(s){alert(s.message)}this.refresh()},r=()=>{confirm("Are you sure? This will destroy all data.")&&(t.value=Oe,n.value=[],t.commit(),n.commit(),this.refresh())},o=()=>{confirm("Are you sure? This will destroy allocations.")&&(n.value=[],n.commit(),this.refresh())};for(let{}of this){const i=(e.name??"").trim(),s=atob(e.target??"").trim();yield u("div",{class:"container"},s&&i?u(ot,{player:{name:i,target:s}}):n.value.length?u(st,{setup:t.value,allocations:n.value,onReset:o}):u(at,{setup:t.value,onSubmit:l,onReset:r}))}}it.render(u(ht,null),document.body);
